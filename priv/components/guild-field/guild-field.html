<link rel="import" href="../paper-card/paper-card.html">
<link rel="import" href="../paper-styles/color.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../iron-icons/image-icons.html">
<link rel="import" href="../iron-icons/device-icons.html">
<link rel="import" href="../iron-icons/av-icons.html">
<link rel="import" href="../iron-icons/maps-icons.html">
<link rel="import" href="../guild-util/guild-util.html">

<dom-module id="guild-field">
  <template>
    <style>
     :host {
         --field-color: var(--paper-blue-500);
     }
     :root {
         display: flex;
         flex-direction: row;
         align-items: center;
         background-color: var(--field-color);
         color: #fff;
         padding: 14px 15px 11px 10px;
         height: 100%;
         @apply(--guild-field);
     }
     #main {
         flex-grow: 1;
         padding-left: 5px;
     }
     #value {
         font-size: 36px;
         text-align: right;
         line-height: 0.9;
         margin-bottom: 5px;
     }
     #label {
         font-size: 18px;
         text-align: right;
         line-height: 1.2;
     }
     iron-icon {
         --iron-icon-width: 64px;
         --iron-icon-height: auto;
     }
    </style>

    <paper-card>
      <div id="icon">
        <iron-icon icon="[[icon]]"></iron-icon>
      </div>
      <div id="main">
        <div id="value">[[displayValue]]</div>
        <div id="label">[[label]]</div>
      </div>
    </paper-card>
  </template>
  <script>
   Polymer({
       is: "guild-field",

       properties: {
           label: String,
           value: {
               type: String,
               value: null
           },
           format: {
               type: String,
               value: null
           },
           rawValue: String,
           displayValue: {
               type: String,
               computed: 'computeDisplayValue(rawValue, format)'
           },
           color: String,
           icon: String
       },

       ready: function() {
           if (this.color) {
               this.customStyle['--field-color'] =
                   "var(--paper-" + this.color + ")";
           }
           if (this.value != null) {
               this.rawValue = this.value;
           } else {
               this.rawValue = "--";
           }
       },

       computeDisplayValue: function(raw, format) {
           return format ? Guild.Util.tryFormat(raw, format) : raw;
       }
   });
  </script>
</dom-module>
